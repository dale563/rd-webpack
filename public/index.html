<!doctype html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><title>Présentation</title><script defer="defer" src="assets/scripts/main-5f12449ebc5d3a625076.bundle.js"></script><script defer="defer" src="assets/scripts/presentation-9ea039677e6fdbae4f61.bundle.js"></script><link href="assets/styles/main-6015cf64a2f17574613b.css" rel="stylesheet"><link href="assets/styles/presentation-0ffecffe6ec273f9df5c.css" rel="stylesheet"></head><body><header><nav class="navbar navbar-expand-lg navbar-light bg-light px-3"><a class="navbar-brand" href="javascript:;"><h1>Présentation</h1></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavDropdown"><ul class="navbar-nav"><li class="nav-item active"><a class="nav-link" href="javascript:;">Webpack(1/2)<span class="sr-only"></span></a></li><li class="nav-item"><a class="nav-link" href="page-en-construction.html">Page en construction</a></li></ul></div></nav></header><main class="reveal"><div class="slides"><section><section><img src="assets/images/logo-on-dark-bg.png" alt="logo de webpack"></section><section><p>Avant tout, vous pouvez faire un clone de la présention</p><pre>
              <code data-trim>
                git clone https://github.com/dale563/rd-webpack.git
              </code>
            </pre><p>Ensuite entrez dans le dossier et lancer l'installation:</p><pre>
              <code data-trim>
                npm install
              </code>
            </pre><p>Finalement, lancer le serveur de développement :</p><pre>
              <code data-trim>
                npm run dev
              </code>
            </pre><p>Vous devriez ainsi avoir la même présentation que moi.</p></section><section><h3>Pourquoi utiliser Webpack :</h3><blockquote>[Pour] faciliter le développement et la gestion de sites et d'applications web modernes.</blockquote><ul><li>Créer un environnement de travail</li><li>C'est un outil puissant et malléable</li><li>Il est bien documenté et très utilisé</li></ul></section><section><h3>Webpack est un module bundler</h3><img src="assets/images/module-bundler.png" alt="logo de webpack"></section><section data-markdown><textarea data-template>
            ### Ordre du jour
            1. Histoire, fonctionnement, nomenclature, fonctionnement, pros et défi de webpack;
                1. Présentations de quelques loaders et de plugins;
            2. On entre dans le code - la structure du fichier de configuration:
                1. Exploration et analyse de la première structure (branche config01);
                2. Changement de branche - exploration de la seconde structure (branche config02);
          </textarea></section><section><h3>Son histoire</h3><ul><li>Javascript seulement dans les Navigateur</li><li>Les IIFEs (Immediately invoked function expressions)</li><li>Node.js = début des modules Bundlers</li><li>npm + Node.js + modules</li><li>ESM - ECMAScript standard</li><li>Automatic Dependecy Collection</li><li>Premier release en 2014 (wiki)</li><li>Source (reste): <a href="https://webpack.js.org/concepts/why-webpack/">Why Webpack</a></li></ul></section><section><h3>Son fonctionnement</h3>Input -> Transformation -> Output</section><section><h3>Termes importants</h3>Module, Loaders, Plugins, Chunk</section><section data-markdown><textarea data-template>
            ### Et à partir de là?
             Constitué à 80% de plugins et il existe beaucoup, BEAUCOUP, de loaders et de Plugins. 

             Il à donc été pensé pour être personnalisable.

             Input -> Transformation -> Output

             Modules -> Loaders+Plugins -> Chunks/bundles +++

            </textarea></section><section><h3>Qu'est-ce qu'on fait avec ça?</h3><p>On se demande avec quoi part, comment on veut travailler entre les deux (environnement dev) et avec quoi on veut finir(dist/public).</p><p>Puis on construit notre environnement sur mesure avec webpack et ses super avantage.</p></section><section data-markdown><textarea data-template>
            ### Pas si évident
            1. Fonctionnement harmonieux des modules ensembles
                1. Webpack évolue et change de fonctionnement (et de compatibilité);
                2. Il est au centre des problèmes d'interaction entre les modules;
                3. Finalement, il est à cheval sur l'environnement Node.js;
            2. Choix des loaders et des plugins
                1. Webpack est d'abord javascipt
          </textarea></section><section data-markdown><textarea data-template>
            ### Une vrai merveille une fois qu'on le comprends même une petit peu
            1. Beaucoup de documentation;
            2. C'est un module bundler qui est bien rodé et entrenu;
            3. On peut faire VRAIMENT BEAUCOUP de chose avec;
            4. Va chercher les dépendances automatiquement;
            5. Permet aussi d'optimiser la performance et le temps de chargement;
            6. Il est plaisant à utiliser;
          </textarea></section><section><h3>Sélection de Modules, loaders et plugins</h3></section><section><h3>Selection - Webpack et Bable</h3><table class="table table-dark table-hover"><thead><tr><th scope="col">Nom</th><th scope="col">Utilité</th><th scope="col">Ressource</th></tr></thead><tbody><tr><th scope="row">webpack</th><td>Packter toute pour le web</td><td><a href="https://github.com/babel/babel-loader"><i class="bi bi-github"></i></a><a href="https://webpack.js.org/"><i class="bi bi-link-45deg"></i></a></td></tr><tr><th scope="row">webpack-cli</th><td>Communiquer en ligne de commande avec webpack</td><td><a href="https://github.com/babel/babel-loader"><i class="bi bi-github"></i></a><a href="#"><i class="bi bi-link-45deg"></i></a></td></tr><tr><th scope="row">webpack-dev-server</th><td>Rouler un environnement de développement</td><td><a href="https://github.com/babel/babel-loader"><i class="bi bi-github"></i></a><a href="#"><i class="bi bi-link-45deg"></i></a></td></tr></tbody></table></section><section><h3>Sélection - Webpack et Babel</h3><table class="table table-dark table-hover"><thead><tr><th scope="col">Nom</th><th scope="col">Utilité</th><th scope="col">Ressource</th></tr></thead><tbody><tr><th scope="row">webpack-merge</th><td>Joindre plusieurs fichiers de configuraitons ensemble</td><td><a href="https://github.com/babel/babel-loader"><i class="bi bi-github"></i></a><a href="#"><i class="bi bi-link-45deg"></i></a></td></tr><tr><th scope="row">babel-loader</th><td>compatibilité</td><td><a href="https://www.npmjs.com/package/babel-loader">npm</a><a href="https://github.com/babel/babel-loader"><i class="bi bi-github"></i></a><a href="#"><i class="bi bi-link-45deg"></i></a></td></tr></tbody></table></section><section><h3>Sélection - Styles</h3><table class="table table-dark table-hover"><thead><tr><th scope="col">Nom</th><th scope="col">Utilité</th><th scope="col">Ressource</th></tr></thead><tbody><tr><th scope="row">node-sass</th><td>Requis pour le sass-loader</td><td><a href="https://www.npmjs.com/package/node-sass">npm</a><a href="https://github.com/sass/node-sass"><i class="bi bi-github"></i></a></td></tr><tr><th scope="row">sass-loader</th><td>Converti le sass en css</td><td><a href="https://www.npmjs.com/package/sass-loader"></a><a href="https://github.com/webpack-contrib/sass-loader"><i class="bi bi-github"></i></a></td></tr><tr><th scope="row">css-loader</th><td>Lire le CSS</td><td><a href="https://www.npmjs.com/package/css-loader">npm</a><a href="https://github.com/webpack-contrib/css-loader"><i class="bi bi-github"></i></a><a href="https://webpack.js.org/loaders/css-loader/"><i class="bi bi-link-45deg"></i></a></td></tr><tr><th scope="row">mini-css-extract-plugin</th><td>Créer et gérer des fichiers CSS</td><td><a href="https://webpack.js.org/plugins/mini-css-extract-plugin/">npm</a><a href="https://github.com/webpack-contrib/mini-css-extract-plugin"><i class="bi bi-github"></i></a><a href="https://webpack.js.org/plugins/mini-css-extract-plugin/"><i class="bi bi-link-45deg"></i></a></td></tr></tbody></table></section><section><h3>Sélection - HTML et autre</h3><table class="table table-dark table-hover"><thead><tr><th scope="col">Nom</th><th scope="col">Utilité</th><th scope="col">Ressource</th></tr></thead><tbody><tr><th scope="row">html-loader</th><td>Lire le code HTML</td><td><a href="https://www.npmjs.com/package/html-loader">npm</a><a href="https://github.com/webpack-contrib/html-loader"><i class="bi bi-github"></i></a><a href="https://webpack.js.org/loaders/html-loader/"><i class="bi bi-link-45deg"></i></a></td></tr><tr><th scope="row">html-webpack-plugin</th><td>Interagir avec le code html - plus d'option que html-loader</td><td><a href="https://www.npmjs.com/package/html-webpack-plugin">npm</a><a href="https://github.com/jantimon/html-webpack-plugin"><i class="bi bi-github"></i></a><a href="https://webpack.js.org/plugins/html-webpack-plugin/"><i class="bi bi-link-45deg"></i></a></td></tr><tr><th scope="row">copy-webpack-plugin</th><td>Copiers les éléments qui contourne le "dependencies graph de Webpack"</td><td><a href="https://github.com/webpack-contrib/copy-webpack-plugin"><i class="bi bi-github"></i></a><a href="#"><i class="bi bi-link-45deg"></i></a></td></tr></tbody></table></section><section><h3>Sélection - Aller plus loin</h3><table class="table table-dark table-hover"><thead><tr><th scope="col">Nom</th><th scope="col">Utilité</th><th scope="col">Ressource</th></tr></thead><tbody><tr><th scope="row">export-loader</th><td>Exporter les modules en les important...</td><td><a href="https://github.com/babel/babel-loader"><i class="bi bi-github"></i></a><a href="#"><i class="bi bi-link-45deg"></i></a></td></tr><tr><th scope="row">imagemin-webp-webpack-plugin</th><td>Convertir les images en format webp</td><td><a href="https://www.npmjs.com/package/imagemin-webp-webpack-plugin">npm</a></td></tr><tr><th scope="row">purge-css-webpack-plugin</th><td>Enlever le CSS non utilisé</td><td><a href="https://www.npmjs.com/package/purgecss-webpack-plugin">npm</a></td></tr></tbody></table></section><section><h3>Sélection - Aller plus loin</h3><table class="table table-dark table-hover"><thead><tr><th scope="col">Nom</th><th scope="col">Utilité</th><th scope="col">Ressource</th></tr></thead><tbody><tr><th scope="row">webpack-easy-seo</th><td>Améliorer le SEO</td><td><a href="https://www.npmjs.com/package/webpack-easy-seo">npm</a></td></tr><tr><th scope="row">Communauté webpack-contrib</th><td>Plusieurs repositories supportés par la communauté</td><td><a href="https://github.com/webpack-contrib"><i class="bi bi-github"></i></a></td></tr></tbody></table></section></section><section><section><h3>Entrons dans le code - branche config01</h3><pre><code data-trim>
                git checkout config01
                npm install
                npm run dev
              </code></pre></section><section><h3>Regardons d'abord le fichier json</h3><pre><code data-trim data-line-numbers="8-9|15-32|35">
                {
                  "name": "rd-webpack",
                  "version": "1.0.0",
                  "description": "",
                  "private": true,
                  "main": "./src/scripts/main.js",
                  "scripts": {
                    "dev": "webpack-dev-server --open",
                    "prod": "webpack --mode=production"
                  },
                  "keywords": [],
                  "author": "DALE LIMOGES",
                  "license": "MIT",
                  "devDependencies": {
                    "@babel/core": "^7.16.0",
                    "@babel/preset-env": "^7.16.4",
                    "babel-loader": "^8.2.3",
                    "copy-webpack-plugin": "^10.0.0",
                    "css-loader": "^6.5.1",
                    "exports-loader": "^3.1.0",
                    "file-loader": "^6.2.0",
                    "html-loader": "^3.0.1",
                    "html-webpack-plugin": "^5.5.0",
                    "imagemin-webp-webpack-plugin": "^3.3.6",
                    "mini-css-extract-plugin": "^2.4.5",
                    "node-sass": "^6.0.1",
                    "sass-loader": "^12.3.0",
                    "style-loader": "^3.3.1",
                    "webpack": "^5.64.4",
                    "webpack-cli": "^4.9.1",
                    "webpack-dev-server": "^4.6.0",
                    "webpack-merge": "^5.8.0"
                  },
                  "dependencies": {
                    "bootstrap": "^4.5.0",
                    "bootstrap-icons": "^1.7.2",
                    "highlight.js": "^11.3.1",
                    "jquery": "^3.5.2",
                    "popper.js": "^1.16.1-lts",
                    "reveal.js": "^4.2.0"
                  }
                }
              </code></pre></section><section><h3>Puis le fichier de configuration Webpack</h3><p>Voir le fichier webpack.config.js</p><p>Et regardons la structure de dossier en examinant le fichier</p></section><section><h3>Il y a d'autre manière de faire ... plus recommandée</h3><pre>
                <code data-trim>
                  git checkout config02
                </code>
              </pre></section></section><section><section><h3>Seconde configuration</h3><p>Aller sur la branche config02 pour accéder la cette section de la présentation</p><pre><code data-trim>
              git checkout config02
              npm install
              npm run dev
            </code></pre></section><section><h3>Regardons d'abord le fichier json (config02)</h3><pre><code data-trim data-line-numbers="8-9|28">
              {
                "name": "rd-webpack",
                "version": "1.0.0",
                "description": "",
                "private": true,
                "main": "./src/scripts/main.js",
                "scripts": {
                  "dev": "webpack-dev-server --config webpack.config.dev.js",
                  "prod": "webpack --config webpack.config.prod.js"
                },
                "keywords": [],
                "author": "DALE LIMOGES",
                "license": "MIT",
                "devDependencies": {
                  "@babel/core": "^7.16.0",
                  "@babel/preset-env": "^7.16.4",
                  "babel-loader": "^8.2.3",
                  "css-loader": "^6.5.1",
                  "html-loader": "^3.0.1",
                  "html-webpack-plugin": "^5.5.0",
                  "imagemin-webp-webpack-plugin": "^3.3.6",
                  "mini-css-extract-plugin": "^2.4.5",
                  "node-sass": "^6.0.1",
                  "sass-loader": "^12.3.0",
                  "webpack": "^5.64.4",
                  "webpack-cli": "^4.9.1",
                  "webpack-dev-server": "^4.6.0",
                  "webpack-merge": "^5.8.0"
                },
                "dependencies": {
                  "bootstrap": "^4.5.0",
                  "bootstrap-icons": "^1.7.2",
                  "highlight.js": "^11.3.1",
                  "jquery": "^3.5.2",
                  "popper.js": "^1.16.1-lts",
                  "reveal.js": "^4.2.0"
                }
              }
            </code></pre></section><section><h3>Puis les fichiers de configuration Webpack</h3><ul><li>webpack.config.commun.js</li><li>webpack.config.dev.js</li><li>webpack.config.prod.js</li></ul></section><section><ul><li>webpack.config.prod.js</li></ul><pre>
              <code data-trim data-line-numbers="2-3|5|7|12|17|20">
                const MiniCssExtractPlugin = require('mini-css-extract-plugin');
                const common = require('./webpack.config.commun');
                const { merge } = require('webpack-merge');

                module.exports = merge(common, {

                    mode: 'production',

                    plugins: [
                        new MiniCssExtractPlugin({
                            linkType: 'text/css',
                            filename: 'assets/styles/[name]-[contenthash].css'
                        })
                    ],

                    output: {
                        filename: 'assets/scripts/[name]-[contenthash].bundle.js',
                    },

                });
              </code>
            </pre></section><section><ul><li>webpack.config.dev.js</li></ul><pre>
              <code data-trim data-line-numbers="1-2|5|7|10|16|22-25|27">
                const { merge } = require('webpack-merge');
                const common = require('./webpack.config.commun');
                const MiniCssExtractPlugin = require('mini-css-extract-plugin');

                module.exports = merge(common, {

                    mode: 'development',

                    output: {
                        filename: 'assets/scripts/[name]-bundle.js',
                    },

                    plugins: [
                        new MiniCssExtractPlugin({
                            linkType: 'text/css',
                            filename: 'assets/styles/[name].css'
                        })
                    ],

                    devtool: 'inline-source-map',

                    devServer: {
                        open: true,
                        hot: true,
                    },

                });
              </code>
            </pre></section><section><ul><li>webpack.config.commun.js</li></ul><pre>
              <code data-trim data-line-numbers="1-2|5|7-11|13-17|19-30|23,28|32|33|34-43|44-47|48-54|55-61|62-65">
                const path = require('path');
                const HtmlWebPackPlugin = require( 'html-webpack-plugin' );
                const MiniCssExtractPlugin = require('mini-css-extract-plugin');

                module.exports = {

                    entry: {
                        main: path.resolve(__dirname, 'src/assets/scripts/main.js'),
                        presentation: path.resolve(__dirname, 'src/assets/scripts/presentation.js'),
                        pageconstruction: path.resolve(__dirname, 'src/assets/scripts/pageconstruction.js'),
                      },
                      
                    output: {
                        path: path.resolve(__dirname, 'public'),
                        assetModuleFilename: 'assets/[name][ext]',
                        clean: true,
                    },

                    plugins: [
                        new HtmlWebPackPlugin({
                            filename: 'index.html',
                            template: path.resolve(__dirname, 'src/index.html'),
                            excludeChunks: [ 'pageconstruction' ]
                        }),
                        new HtmlWebPackPlugin({
                            filename: 'page-en-construction.html', 
                            template: path.resolve(__dirname, 'src/page-en-construction.html'), 
                            chunks: [ 'main', 'pageconstruction' ]
                        }), 
                    ],

                    module: {
                        rules: [
                            {
                                test: /\.js$/,
                                exclude: /node-modules/,
                                use: {
                                    loader: 'babel-loader',
                                    options: {
                                      presets: ['@babel/preset-env'],
                                    },
                                  },
                            },
                            {
                                test: /\.html$/,
                                loader: 'html-loader',
                            },
                            {
                                test: /\.(svg|ico|png|webp|jpg|gif|jpeg)$/, 
                                type: 'asset/resource',
                                generator: {
                                    filename: 'assets/images/[name][ext]'
                                } 
                            },
                            {
                                test: /\.(woff|woff2|ttf|eot)$/, 
                                type: 'asset/resource',
                                generator: {
                                    filename: 'assets/fonts/[name][ext]'
                                } 
                            },
                            {
                                test: /\.(scss|css)$/,
                                use: [MiniCssExtractPlugin.loader,'css-loader', 'sass-loader'],
                            },
                        ]
                    },
                    
                    
                };
              </code>
            </pre></section><section><h3>Analyse et retour</h3><ul><li>Pas évident de trouver l'information fonctionnelle sur webpack</li><li>De base une structure js ou jsx</li><li><ul><li>Tout ne fonctionne pas avec tout parfaitement</li><li>copy-webpack-plugin et le "dependencies graph"</li><li>html-loader et html-webpack-plugin</li></ul></li><li>config01 vs config02</li></ul></section><section><h3>Quoi s'attendre pour la seconde présentation</h3><ul><li>Chunk (ex:vendor)</li><li>Optimisation<ul><li>Tansformer les images en webp</li><li>Purger le CSS</li><li>Lancer les scripts en différer</li></ul></li><li>PHP/React</li><li>Wordpress? - "cross environnement"</li><li>Des suggestions?</li></ul></section><section><h3>FIN</h3><p>Questions, commentaires injures?</p></section></section><section data-markdown><textarea data-template>
            ### Bibliographie:
            * https://webpack.js.org/
            * https://programmer.help/blogs/introduction-to-the-most-complete-webpack-in-history.html
            * https://en.wikipedia.org/wiki/Webpack
            * https://www.youtube.com/watch?v=9c3dBhvtt6o
            * https://www.youtube.com/watch?v=MpGLUVbqoYQ&t=29s
            * https://www.youtube.com/watch?v=TOb1c39m64A&t=1606s
            * https://www.youtube.com/watch?v=GU-2T7k9NfI&t=733s
            * https://www.youtube.com/watch?v=jiY-bAhe7oU&t=640s
          </textarea></section></div></main><footer></footer></body></html>